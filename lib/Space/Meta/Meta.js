'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _config=require('../../../config');var _config2=_interopRequireDefault(_config);var _log=require('../../Utilities/log');var _log2=_interopRequireDefault(_log);var _three=require('three');var _Space=require('../Space');var _Space2=_interopRequireDefault(_Space);var _Existence=require('./Existence/Existence');var _Existence2=_interopRequireDefault(_Existence);var _Graphics=require('./Graphics/Graphics');var _Graphics2=_interopRequireDefault(_Graphics);var _Physics=require('./Physics/Physics');var _Physics2=_interopRequireDefault(_Physics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var Meta=function(){function Meta(props){_classCallCheck(this,Meta);this.name='Meta';this.lifes=[];this.events=[];this._entered=null;this._touched=false;this.scale={x:props!==undefined&&props.scale!==undefined&&props.scale.x!==undefined?props.scale.x:1,y:props!==undefined&&props.scale!==undefined&&props.scale.y!==undefined?props.scale.y:1,z:props!==undefined&&props.scale!==undefined&&props.scale.z!==undefined?props.scale.z:1};this.rotation={x:props!==undefined&&props.rotation!==undefined&&props.rotation.x!==undefined?props.rotation.x:0,y:props!==undefined&&props.rotation!==undefined&&props.rotation.y!==undefined?props.rotation.y:0,z:props!==undefined&&props.rotation!==undefined&&props.rotation.z!==undefined?props.rotation.z:0};this.position={x:props!==undefined&&props.position!==undefined&&props.position.x!==undefined?props.position.x:0,y:props!==undefined&&props.position!==undefined&&props.position.y!==undefined?props.position.y:0,z:props!==undefined&&props.position!==undefined&&props.position.z!==undefined?props.position.z:0};this.existence=props!==undefined&&props.existence!==undefined?props.existence:new _Existence2.default;this.graphics=props!==undefined&&props.graphics!==undefined?props.graphics:new _Graphics2.default(props);this.physics=props!==undefined&&props.physics!==undefined?props.physics:new _Physics2.default(props);if(this.graphics)_Space2.default.get().add(this);if(this.existence.start===null&&this.existence.end===null)_Space2.default.get().start(this)}_createClass(Meta,[{key:'o',value:function o(eventName,callback){return this.on(eventName,callback)}},{key:'on',value:function on(eventName,callback){if(typeof eventName=='function'){callback=eventName;eventName='p'}if(eventName=='t')eventName='touch';if(eventName=='r')eventName='release';if(eventName=='p')eventName='point';if(this.events[eventName]){this.events[eventName].push(callback)}else{this.events[eventName]=[callback]}return this}},{key:'go',value:function go(eventName){var _this=this;for(var _len=arguments.length,rest=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){rest[_key-1]=arguments[_key]}if(this.events[eventName]){this.events[eventName].forEach(function(cb){cb.apply(undefined,rest.concat([_this]))})}return this}},{key:'setGraphics',value:function setGraphics(){this.setScale();this.setPosition();this.setRotation();return this}},{key:'setScale',value:function setScale(scale){scale=scale!==undefined?scale:this.scale;this.graphics.setScale(scale);this.scale=scale;return this}},{key:'s',value:function s(position){return this.setPosition(position)}},{key:'set',value:function set(position){return this.setPosition(position)}},{key:'setPosition',value:function setPosition(position){position=position!==undefined?position:this.position;this.graphics.setPosition(position);this.position=position;return this}},{key:'setRotation',value:function setRotation(rotation){rotation=rotation!==undefined?rotation:this.rotation;this.graphics.setRotation(rotation);this.rotation=rotation;return this}},{key:'p',value:function p(physics){return this.setPhysics(physics)}},{key:'setPhysics',value:function setPhysics(){this.physics.setPosition}},{key:'l',value:function l(life){return this.live(life)}},{key:'live',value:function live(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'on';var life=arguments[1];switch(mode){case'on':case'o':case 1:this.lifes.push(life);break;case'again':case'a':case 0:this.lifes=[];this.lifes.push(life);break;}return this}},{key:'appear',value:function appear(){return this.end()}},{key:'start',value:function start(){_Space2.default.get().start(this);this.existence.started=true}},{key:'die',value:function die(){return this.end()}},{key:'disappear',value:function disappear(){return this.end()}},{key:'end',value:function end(){_Space2.default.get().end(this);this.existence.ended=true}},{key:'life',value:function life(){if(this.existence.start!==null)if(new Date(this.existence.start)<new Date){if(!this.existence.started)this.start()}if(this.existence.end!==null)if(new Date>new Date(this.existence.start)){if(new Date>new Date(this.existence.end)){if(!this.existence.ended)this.end()}}}},{key:'c',value:function c(color){return this.color(color)}},{key:'color',value:function color(){var _color=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Math.random()*16777215;switch(_color){case 0:case'g':case'gold':_color=16766720;break;case 1:case'r':case'red':_color=16711680;break;case 2:case'g':case'green':_color=65280;break;case 3:case'b':case'blue':_color=255;break;case 4:case'y':case'yellow':_color=16776960;break;case 5:case'w':case'white':_color=16777215;break;}this._color=_color;return this}},{key:'m',value:function m(direction,amount){return this.move(direction,amount)}},{key:'move',value:function move(direction,amount){switch(direction){default:case 0:case'f':case'forward':case'forwards':this.graphics.mesh.position.z-=amount;break;case 1:case'b':case'backward':case'backwards':this.graphics.mesh.position.z+=amount;break;case 2:case'l':case'left':this.graphics.mesh.position.x-=amount;break;case 3:case'r':case'right':this.graphics.mesh.position.x+=amount;break;case 4:case'd':case'down':this.graphics.mesh.position.y-=amount;break;case 5:case'u':case'up':this.graphics.mesh.position.y+=amount;break;}this.setSize();this.setPosition();this.physics();return this}},{key:'r',value:function r(direction,amount){return this.rotate(direction,amount)}},{key:'rotate',value:function rotate(direction,amount){switch(direction){default:case 0:case'f':case'forward':case'forwards':this.graphics.mesh.rotation.set({x:amount,y:0,z:0});break;case 1:case'b':case'backward':case'backwards':this.graphics.mesh.rotation.set({x:-amount,y:0,z:0});break;case 2:case'l':case'left':this.graphics.mesh.rotation.set({x:0,y:-amount,z:0});break;case 3:case'r':case'right':this.graphics.mesh.rotation.set({x:0,y:amount,z:0});break;case 4:case'd':case'down':this.graphics.mesh.rotation.set({x:0,y:0,z:amount});break;case 5:case'u':case'up':this.graphics.mesh.rotation.set({x:0,y:0,z:-amount});break;}this.setRotation();this.physics();return this}},{key:'add',value:function add(instance){this.graphics=instance}},{key:'i',value:function i(ms,f){return this.in(ms,f)}},{key:'in',value:function _in(ms,f){setTimeout(function(){f()},ms)}},{key:'e',value:function e(ms,f){return this.every(ms,f)}},{key:'ev',value:function ev(ms,f){return this.every(ms,f)}},{key:'every',value:function every(ms,f){f();setInterval(function(){f()},ms)}}]);return Meta}();exports.default=Meta;